<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BRAAR RÃDIO â€” O Som dos ClÃ¡ssicos</title>
  <link rel="icon" href="BRAAR_ICON.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <img src="BRAAR_ICON.png" alt="Logo BRAAR">
    <div>
      <h1>BRAAR RÃDIO</h1>
      <div class="onair">ğŸ”´ NO AR</div>
    </div>
    <div class="live-banner" id="liveBanner">ğŸ”µ AO VIVO com Sarah</div>
  </header>

  <div class="listeners" id="listenersCount">ğŸ‘¥ 0 ouvintes online</div>

  <div class="now-playing">
    <h2>Agora Tocando</h2>
    <div class="track-name" id="trackName">Carregando mÃºsica...</div>
    <div class="equalizer">
      <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
    </div>
  </div>

  <section class="info">
    <h3>ğŸ¶ Projeto Cultural BRAAR RÃDIO</h3>
    <p>
      A <strong>BRAAR RÃ¡dio</strong> Ã© um projeto cultural dedicado a preservar e celebrar
      os maiores sucessos da mÃºsica <strong>brasileira e internacional</strong>.
      Todas as faixas sÃ£o reproduzidas com respeito aos direitos autorais,
      <strong>sem fins lucrativos</strong>.
      Um tributo ao som que marcou geraÃ§Ãµes â€” conectando passado e futuro atravÃ©s da mÃºsica. ğŸ‡§ğŸ‡·ğŸŒ
    </p>
  </section>

  <audio id="audioPlayer"></audio>
  <audio id="voicePlayer"></audio>
  <audio id="vinhetaPlayer"></audio>

  <footer>BRAAR Â© 2025 â€” Projeto cultural brasileiro</footer>

<!-- ğŸ”Š Modal de permissÃ£o de Ã¡udio -->
<div id="playPrompt" class="play-prompt" role="dialog" aria-modal="true" aria-labelledby="playPromptTitle">
  <div class="play-prompt-card">
    <div class="icon-wrapper">
      <div class="soundwave"></div>
      <div class="soundwave delay"></div>
      <div class="soundwave delay2"></div>
    </div>
    <h2 id="playPromptTitle">Ative o Som</h2>
    <p>Toque no botÃ£o abaixo para ouvir a <strong>BRAAR RÃ¡dio</strong> ao vivo.<br> Ã‰ rÃ¡pido e seguro ğŸ”¥</p>
    <button id="startBtn" class="btn-primary">ğŸ”Š Permitir e Ouvir</button>
    <button id="muteBtn" class="btn-secondary">ğŸ”‡ Entrar sem som</button>
  </div>
</div>

<!-- ğŸ”˜ BotÃ£o flutuante para ligar/desligar som -->
<button id="soundToggle" class="sound-toggle hidden" title="Ativar/Desativar som">
  ğŸ”‡
</button>

<!-- Ajuste: manter permissÃ£o de Ã¡udio sem reexibir o painel -->
<script>
function getPermissionState() {
  return localStorage.getItem('braar_permission');
}

function setPermissionState(state) {
  localStorage.setItem('braar_permission', state);
}

function showAudioPrompt(startCallback, muteCallback) {
  const state = getPermissionState();
  const prompt = document.getElementById('playPrompt');

  // Se jÃ¡ foi concedido, inicia o som e nunca mais exibe o painel
  if (state === 'granted') {
    prompt.remove();
    startCallback();
    return;
  }

  // Se usuÃ¡rio escolheu entrar sem som, tambÃ©m nÃ£o mostra mais o painel
  if (state === 'muted') {
    prompt.remove();
    muteCallback();
    return;
  }

  // Caso ainda nÃ£o tenha escolhido, mostra o painel
  prompt.classList.remove('hidden');

  const startBtn = document.getElementById('startBtn');
  const muteBtn = document.getElementById('muteBtn');

  startBtn.onclick = () => {
    setPermissionState('granted');
    prompt.classList.add('hidden');
    startCallback();
  };

  muteBtn.onclick = () => {
    setPermissionState('muted');
    prompt.classList.add('hidden');
    muteCallback();
  };
}

// Dentro do initPlayer()
async function initPlayer() {
  const player = document.getElementById('audioPlayer');
  const voice = document.getElementById('voicePlayer');
  const vinheta = document.getElementById('vinhetaPlayer');
  const soundToggle = document.getElementById('soundToggle');

  function startWithSound() {
    player.muted = voice.muted = vinheta.muted = false;
    soundToggle.textContent = 'ğŸ”Š';
    soundToggle.classList.remove('hidden');
    player.play().catch(() => {});
  }

  function startMuted() {
    player.muted = voice.muted = vinheta.muted = true;
    soundToggle.textContent = 'ğŸ”‡';
    soundToggle.classList.remove('hidden');
  }

  showAudioPrompt(startWithSound, startMuted);
}
</script>

  
  <script src="script.js"></script>
</body>
</html>

